<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.study.nbnb.dao.SearchDao">

    <sql id="searchColumns">
        title, content, writer
    </sql>

    <select id="SearchDao" resultType="com.study.nbnb.dto.SearchDto">
        SELECT * FROM 
        <choose>
            <when test="tableName == 'b1board'">
                b1board
            </when>
            <when test="tableName == 'b2board'">
                b2board
            </when>
            <when test="tableName == 'playboard'">
                playboard
            </when>
        </choose>
        WHERE 
        <include refid="com.study.nbnb.dao.SearchDao.searchColumns"/>
        LIKE #{keyword}
        ORDER BY #{orderBy} LIMIT #{start}, #{pageSize}
    </select>

    <select id="SearchCountDao" resultType="com.study.nbnb.dto.SearchDto">
        SELECT COUNT(*) FROM 
        <choose>
            <when test="tableName == 'B1board'">
                b1board
            </when>
            <when test="tableName == 'B2board'">
                b2board
            </when>
            <when test="tableName == 'Playboard'">
                playboard
            </when>
        </choose>
        WHERE 
        <include refid="com.study.nbnb.dao.SearchDao.searchColumns"/>
        LIKE #{keyword}
    </select>

</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.study.nbnb.dao.ShopDao">

	<insert id="insertDao">
		insert into buytable
		values (buytable_seq.nextval, #{param1}, #{param2}, #{param3}, sysdate)
	</insert>
	
	<select id ="selectDao" resultType="com.study.nbnb.dto.ShopDto">
		 select * from buytable where buy_number=(select max(buy_number) from buytable where m_number=${param1})
	</select>
	
	<select id ="selectDao2" resultType="com.study.nbnb.dto.ShopDto">
		select max(buy_number) as buy_number from buytable where m_number=${param1}
	</select>
	
	<select id ="selectDao3" resultType="com.study.nbnb.dto.ShopDto">
		select max(buy_number)+1 as buy_number from buytable
	</select>
		
	<delete id="deleteDao">
		delete from buytable where buy_number = #{param1} and m_number = ${param2}
	</delete>
	
	
	
	<select id="listDao" resultType="com.study.nbnb.dto.ShopDto">
		select * from buytable where m_number=#{param1} order by buy_number desc
	</select>
	
	
</mapper>